{% load_yaml as defaults %}
additional_adresses: []
# list of additional allowed ip network ranges for listen and answer to queries
# listen entry is optional, answer entry is mandatory
# example:
#   - listen: 1.2.3.4
#     answer: 1.2.3.0/24
#   - listen: 2.3.4.9
#     answer: 2.3.5.9/32
#   - answer: 3.4.5.6/24

extensions:
  - pg_stat_statements

user: []
# - name: ''
#   password: ''
#   encrypted: true
#   login: true

database: []
# - name: ''
#   encoding: ''
#   template: ''
#   owner: ''
#   extensions: []

# defaults
default_encoding: UTF8
default_template: template0

# pgtune:
pgtune:
  # enabled:true let postgresql tune its memory needs
  enabled: false
  # strategy: may be "use" or "leave"
  strategy: use
  # value, strategy: "use":   define memory mb available to pgtune
  # value, strategy: "leave": define memory mb not available to pgtune: <general> <per-core>
  memory: 4096
  # memory: 1024 256
  # how many cores (0-9+,all) are used for calculation
  cores: all

# internal, major postgresql version, be careful on change
pgmajor: 12
{% endload %}

{%- set settings = salt['grains.filter_by']({'default': defaults},
  grain='default', default= 'default', merge= salt['pillar.get']('postgresql', {})) %}
